(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{110:function(e,t,n){e.exports={container:"modal-overlay_container__1Gyfy"}},111:function(e,t,n){e.exports={elementWithDragIcon:"burger-constructor-item_elementWithDragIcon__u06sL"}},113:function(e,t,n){e.exports={container:"order-details_container__3FMJQ"}},122:function(e,t,n){},19:function(e,t,n){e.exports={container:"orders-queue_container__3lr_z",statusColumns:"orders-queue_statusColumns__264s9",total:"orders-queue_total__a7itF",column:"orders-queue_column__1_9jI",numbers:"orders-queue_numbers__19NOy",numbersColumn:"orders-queue_numbersColumn__3KFsH",block:"orders-queue_block__2wgUD"}},200:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(41),i=n.n(a),s=(n(122),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,212)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))}),o=n(52),l=n(6),d=n(12),u=function(){return Object(o.b)()},j=o.c,m=n(26),_=n.n(m),b=n(4),p=n(0),x=function(){var e=Object(d.g)(),t="/"===e.location.pathname,n="/feed"===e.location.pathname,r="/profile"===e.location.pathname||"/profile/orders"===e.location.pathname;return Object(p.jsx)("header",{className:"".concat(_.a.header," pb-4 pt-4"),children:Object(p.jsxs)("nav",{className:_.a.nav,children:[Object(p.jsxs)("div",{className:"".concat(_.a.container),children:[Object(p.jsx)("div",{className:"".concat(_.a.container," pr-5 pb-4 pt-4"),children:Object(p.jsxs)(l.c,{to:{pathname:"/"},activeStyle:{color:"#F2F2F3"},className:"".concat(_.a.link," text text_type_main-default ml-2 text_color_inactive"),exact:!0,children:[Object(p.jsx)(b.BurgerIcon,{type:t?"primary":"secondary"}),Object(p.jsx)("p",{className:"text text_type_main-default ml-2",children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]})}),Object(p.jsx)("div",{className:"".concat(_.a.container," ml-2 pl-5 pr-5 pb-4 pt-4"),children:Object(p.jsxs)(l.c,{to:{pathname:"/feed"},activeStyle:{color:"#F2F2F3"},className:"".concat(_.a.link," text text_type_main-default ml-2  ml-2 text_color_inactive"),exact:!0,children:[Object(p.jsx)(b.ListIcon,{type:n?"primary":"secondary"}),Object(p.jsx)("p",{className:"text text_type_main-default ml-2",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})})]}),Object(p.jsx)(l.c,{to:"/",className:_.a.logocontainer,children:Object(p.jsx)(b.Logo,{})}),Object(p.jsx)("div",{className:"".concat(_.a.container," pl-5 pb-4 pt-4"),children:Object(p.jsxs)(l.c,{to:{pathname:"/profile"},activeStyle:{color:"#F2F2F3"},className:"".concat(_.a.link," text text_type_main-default ml-2 text_color_inactive"),children:[Object(p.jsx)(b.ProfileIcon,{type:r?"primary":"secondary"}),Object(p.jsx)("p",{className:"text text_type_main-default ml-2",children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})})]})})},O=n(53),h=n.n(O),f=n(110),g=n.n(f),v=function(e){var t=e.onClickClose,n=e.children;return Object(p.jsx)("div",{className:g.a.container,onClick:t,children:n})},y=document.getElementById("react-modals"),N=function(e){var t=e.children,n=e.header,c=e.closeHandler;return Object(r.useEffect)((function(){var e=function(e){"Escape"===e.key&&c()};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[c]),y?i.a.createPortal(Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:h.a.modal,children:[Object(p.jsxs)("div",{className:n?h.a.modalHeader:h.a.modalHeaderRight,children:[n&&Object(p.jsx)("h2",{className:"text text_type_main-large",children:n}),Object(p.jsx)("button",{className:h.a.closeButton,onClick:function(e){e.stopPropagation(),c&&c()},children:Object(p.jsx)(b.CloseIcon,{type:"primary"})})]}),t]}),Object(p.jsx)(v,{onClickClose:c})]}),y):Object(p.jsx)(p.Fragment,{})},E=n(116),S=n(207),C=n(86),I=n.n(C),T=n(11),R=n(209),k=n(42),w=n.n(k),D=n(210),U="ADD_INGREDIENT_TO_CONSTRUCTOR",F="DELETE_FROM_CONSTRUCTOR",L="CHANGE_INGREDIENTS_ORDER",q="RESET_CONSTRUCTOR",G="GET_INGREDIENTS_REQUEST",P="GET_INGREDIENTS_SUCCESS",B="GET_INGREDIENTS_ERROR",A="SET_INGREDIENT_DETAILS",z="GET_ORDER_NUMBER_REQUEST",M="GET_ORDER_NUMBER_SUCCESS",H="GET_ORDER_NUMBER_ERROR",J="GET_ORDER_CARD_DETAILS_REQUEST",W="GET_ORDER_CARD_DETAILS_SUCCESS",V="GET_ORDER_CARD_DETAILS_ERROR",X="GET_USER_DATA_REQUEST",Q="GET_USER_REGISTER_SUCCESS",Y="GET_USER_DATA_ERROR",K="GET_USER_LOGIN_SUCCESS",Z="GET_USER_FORGOT_PASSWORD_SUCCESS",$="GET_USER_RESET_PASSWORD_SUCCESS",ee="GET_USER_INFO_SUCCESS",te="GET_USER_REFRESH_TOKEN_SUCCESS",ne="GET_USER_INFO_UPDATE_SUCCESS",re="GET_USER_LOGOUT_SUCCESS",ce="WS_CONNECTION_SUCCESS",ae="WS_CONNECTION_ERROR",ie="WS_CONNECTION_CLOSED",se="WS_CONNECTION_START",oe="WS_CONNECTION_START_PROFILE",le="WS_GET_ORDERS",de=n(111),ue=n.n(de),je=function(e){var t=e.uniqueId,n=e.index,c=e._id,a=e.price,i=e.name,s=e.image,o=e.deleteItem,l=Object(r.useRef)(null),d=u(),j=function(e,t){d(function(e,t){return{type:L,dragIndex:e,hoverIndex:t}}(e,t))},m=Object(R.a)({accept:"constructor-ingredient",hover:function(e,t){var r;if(l.current){var c=e.index,a=n;if(c!==a){var i=null===(r=l.current)||void 0===r?void 0:r.getBoundingClientRect(),s=(i.bottom-i.top)/2,o=t.getClientOffset(),d=o&&o.y-i.top;d&&c<a&&d<s||d&&c>a&&d>s||(j(c,a),e.index=a)}}}}),_=Object(T.a)(m,2)[1],x=Object(D.a)({type:"constructor-ingredient",item:{type:"constructor-ingredient",name:i,index:n,image:s,price:a,_id:c,uniqueId:t},collect:function(e){return{isDragging:e.isDragging()}}}),O=Object(T.a)(x,2);O[0];return(0,O[1])(_(l)),Object(p.jsxs)("div",{ref:l,className:ue.a.elementWithDragIcon,children:[Object(p.jsx)(b.DragIcon,{type:"primary"}),Object(p.jsx)(b.ConstructorElement,{"data-test-id":"constructor-ingredient",text:i,price:a,thumbnail:s,handleClose:function(){return o(t)}})]})},me=n(38),_e=n(88),be=n.n(_e),pe=n(113),xe=n.n(pe),Oe=n.p+"static/media/done.f2873d36.png",he=function(e){var t=e.orderId,n=Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h2",{className:"text text_type_digits-large mb-4",children:t}),Object(p.jsx)("span",{className:"text text_type_main-medium mb-15",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(p.jsx)("img",{className:"mb-15",src:Oe,alt:""}),Object(p.jsx)("span",{className:"text text_type_main-default mb-2",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(p.jsx)("span",{className:"text text_type_main-default text_color_inactive mb-10",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]});return Object(p.jsx)("div",{className:xe.a.container,children:t?n:Object(p.jsx)("p",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})})},fe="https://norma.nomoreparties.space/api",ge=n(208),ve=n(211),ye=function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0};function Ne(e,t,n){var r=(n=n||{}).expires;if("number"==typeof r&&r){var c=new Date;c.setTime(c.getTime()+1e3*r),r=n.expires=c}r&&r.toUTCString&&(n.expires=r.toUTCString());var a=e+"="+t+"; path=/";for(var i in n){a+="; "+i;var s=n[i];!0!==s&&(a+="="+s)}document.cookie=a}var Ee,Se,Ce=function(e){switch(e){case"pending":return"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f";case"done":return"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d";case"created":return"\u0421\u043e\u0437\u0434\u0430\u043d";default:return""}},Ie=function(e){var t=Object(ge.a)(new Date(e),new Date,{locale:ve.a});return"".concat(t," i-GMT+3")},Te=function(){return{type:H}},Re=function(e){return function(t){t({type:z}),fetch("".concat(fe,"/orders"),{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:"Bearer "+ye("accessToken")},body:JSON.stringify({ingredients:e})}).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).then((function(e){return t((n=e.order.number,{type:M,orderId:n}));var n})).catch((function(e){console.log("Error message: "+e),t(Te)}))}},ke=function(e){return function(t){t({type:J}),fetch("".concat(fe,"/orders/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).then((function(e){return t((n=e.orders[0],{type:W,orderCardDetails:n}));var n})).catch((function(e){console.log("Error message: "+e),t({type:V})}))}},we=function(){return function(e){localStorage.getItem("refreshToken")&&(e({type:X}),fetch("".concat(fe,"/auth/user"),{method:"GET",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:"Bearer "+ye("accessToken")}}).then((function(e){return e.json()})).then((function(t){if(!t.success)throw t;e({type:ee,user:t.user})})).catch((function(t){"jwt expired"===t.message&&e(De()),e({type:Y}),console.log("Error get user info: "+t.message)})))}},De=function(){return function(e){e({type:X}),fetch("".concat(fe,"/auth/token"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:localStorage.getItem("refreshToken")})}).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).then((function(t){e({type:te}),localStorage.setItem("refreshToken",t.refreshToken),Ne("accessToken",t.accessToken.split("Bearer ")[1],null),e(we())})).catch((function(t){e({type:Y}),console.log("Error refresh token message: "+t)}))}},Ue=function(){return function(e){e({type:X}),fetch("".concat(fe,"/auth/logout"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:localStorage.getItem("refreshToken")}),redirect:"follow",referrerPolicy:"no-referrer"}).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).then((function(t){e({type:re}),localStorage.setItem("refreshToken",""),Ne("accessToken",null,{expires:-1})})).catch((function(t){e({type:Y}),console.log("Error user logout: "+t)}))}},Fe=function(){var e=Object(d.g)(),t=u(),n=j((function(e){return e.constructorStore})),c=n.constructorIngredients,a=n.topBun,i=n.bottomBun,s=j((function(e){return e.userData})).isUserLoggedIn,o=j((function(e){return e.order})).orderId,l=Object(r.useState)(!1),m=Object(T.a)(l,2),_=m[0],x=m[1],O=((null===a||void 0===a?void 0:a.price)||0)+((null===i||void 0===i?void 0:i.price)||0)+(null===c||void 0===c?void 0:c.reduce((function(e,t){return e+t.price}),0)),h=[].concat(Object(me.a)(c),[a,i]);return Object(p.jsxs)("footer",{className:be.a.container,children:[Object(p.jsxs)("div",{className:be.a.price,children:[Object(p.jsx)("p",{className:"text text_type_digits-medium mr-2","data-test-id":"total-cost",children:O||0}),Object(p.jsx)(b.CurrencyIcon,{type:"primary"})]}),Object(p.jsx)(b.Button,{onClick:function(){a&&(s?(t(we()),t(Re(null===h||void 0===h?void 0:h.map((function(e){return null===e||void 0===e?void 0:e._id})))),x(!0),t({type:q})):e.replace("/login"))},type:"primary",size:"large",children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"}),_&&Object(p.jsx)(N,{closeHandler:function(){x(!1)},children:Object(p.jsx)(he,{orderId:o})})]})},Le=function(){var e=u(),t=j((function(e){return e.constructorStore})),n=t.constructorIngredients,r=t.topBun,c=t.bottomBun,a=Object(R.a)({accept:"ingredient",drop:function(t){var n,r,c,a,i;e((n=t.type,r=t.name,c=t.image,a=t.price,i=t._id,{type:U,ingredientType:n,name:r,image:c,price:a,_id:i}))}}),i=Object(T.a)(a,2)[1],s=function(t){e({type:F,uniqueId:t})},o=n.filter((function(e){return"bun"!==e.ingredientType}));return Object(p.jsx)("section",{className:w.a.container,children:Object(p.jsxs)("div",{className:w.a.orders,ref:i,"data-test-id":"burger-constructor",children:[Object(p.jsx)("div",{className:"".concat(w.a.element," pl-8"),"data-test-id":"burger-constructor-bun",children:r&&Object(p.jsx)(b.ConstructorElement,{type:"top",isLocked:!0,text:r.name+" (\u0432\u0435\u0440\u0445)",price:r.price,thumbnail:r.image})}),Object(p.jsx)("div",{className:w.a.mainIngredientsList,"data-test-id":"burger-constructor-main",children:o&&o.map((function(e,t){return Object(p.jsx)(je,{uniqueId:e.uniqueId,_id:e._id,index:t,price:e.price,name:e.name,image:e.image,deleteItem:s},e.uniqueId)}))}),Object(p.jsx)("div",{className:"".concat(w.a.element," pl-8"),"data-test-id":"burger-constructor-bun",children:c&&Object(p.jsx)(b.ConstructorElement,{type:"bottom",isLocked:!0,text:c.name+" (\u043d\u0438\u0437)",price:c.price,thumbnail:c.image})}),Object(p.jsx)(Fe,{})]})})},qe=n(43),Ge=n.n(qe),Pe=n(64),Be=n.n(Pe),Ae=n(44),ze=n.n(Ae),Me=function(){return function(e){e({type:G}),fetch("".concat(fe,"/ingredients")).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).then((function(t){return e((n=t.data,{type:P,ingredients:n}));var n})).catch((function(t){return e({type:B})}))}},He=function(e){return{type:A,ingredient:e}},Je=function(e){var t=e.ingredient,n=Object(d.h)(),r=u(),c=t.name,a=t.image,i=t.price,s=t._id,o=t.type,m=j((function(e){return e.constructorStore})),_=m.constructorIngredients,x=m.topBun,O=Object(D.a)({type:"ingredient",item:{type:o,name:c,image:a,price:i,_id:s},collect:function(e){return{isDragging:e.isDragging()}}}),h=Object(T.a)(O,2),f=h[0].isDragging,g=h[1],v=f?.5:1,y=_.reduce((function(e,t){return x&&x._id===s?2:t._id===s?e+1:e}),0);return Object(p.jsx)("div",{ref:g,className:ze.a.ingredientCard,onClick:function(){r(He(t))},style:{opacity:v},"data-test-id":"burger-ingredient",children:Object(p.jsxs)(l.b,{className:ze.a.link,to:{pathname:"/ingredients/".concat(s),state:{background:n}},children:[Object(p.jsx)("img",{className:ze.a.image,src:a,alt:c}),Object(p.jsxs)("div",{className:ze.a.price,children:[Object(p.jsxs)("p",{className:"text text_type_digits-default pr-2",children:[" ",i," "]}),Object(p.jsx)(b.CurrencyIcon,{type:"primary"})]}),Object(p.jsx)("div",{children:Object(p.jsx)("p",{className:"".concat(ze.a.name," text text_type_main-default"),children:c})}),y>0&&Object(p.jsx)(b.Counter,{count:y,size:"default"})]})})},We=function(e){var t=e.ingredients,n=e.typeName;return Object(p.jsxs)("div",{className:Be.a.container,children:[Object(p.jsx)("p",{className:"text text_type_main-medium mb-6",children:n}),Object(p.jsx)("ul",{className:Be.a.list,children:t.map((function(e){return Object(p.jsx)("li",{className:Be.a.ingredientItem,children:Object(p.jsx)(Je,{ingredient:e})},e._id)}))})]})},Ve=n(54),Xe=n.n(Ve),Qe=function(e){var t=e.onTabClick,n=e.current,r=function(e){t&&t(e)};return Object(p.jsxs)("ul",{className:Xe.a.tabs,children:[Object(p.jsx)("li",{className:Xe.a.item,children:Object(p.jsx)(b.Tab,{value:"bun",active:"bun"===n,onClick:r,children:"\u0411\u0443\u043b\u043a\u0438"})}),Object(p.jsx)("li",{className:Xe.a.item,children:Object(p.jsx)(b.Tab,{value:"sauce",active:"sauce"===n,onClick:r,children:"\u0421\u043e\u0443\u0441\u044b"})}),Object(p.jsx)("li",{className:Xe.a.item,children:Object(p.jsx)(b.Tab,{value:"main",active:"main"===n,onClick:r,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})})]})},Ye=function(){var e=Object(r.useState)("bun"),t=Object(T.a)(e,2),n=t[0],c=t[1],a=u(),i=j((function(e){return e.ingredients})).ingredients;Object(r.useEffect)((function(){a(Me())}),[a]);var s=Object(r.useRef)(null),o=Object(r.useRef)(null),l=Object(r.useRef)(null),d=Object(r.useRef)({bun:s,main:l,sauce:o}),m=Object(r.useRef)(null),_=function(e){return i.filter((function(t){return t.type===e}))};return Object(p.jsxs)("section",{className:Ge.a.section,children:[Object(p.jsx)("h1",{className:"text text_type_main-large",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(p.jsx)(Qe,{onTabClick:function(e){!function(e){var t;null===(t=e.current)||void 0===t||t.scrollIntoView({behavior:"smooth"})}(d.current[e]),c(e)},current:n}),Object(p.jsxs)("div",{ref:m,className:Ge.a.ingredientList,onScroll:function(){var e=m.current.getBoundingClientRect().top,t=s.current.getBoundingClientRect().top,n=o.current.getBoundingClientRect().top,r=l.current.getBoundingClientRect().top,a=Math.abs(e-t),i=Math.abs(e-n),d=Math.abs(e-r);c(a<i?"bun":i<d?"sauce":"main")},children:[Object(p.jsx)("div",{className:Ge.a.item,ref:s,children:Object(p.jsx)(We,{ingredients:_("bun"),typeName:"\u0411\u0443\u043b\u043a\u0438"})}),Object(p.jsx)("div",{className:Ge.a.item,ref:o,children:Object(p.jsx)(We,{ingredients:_("sauce"),typeName:"\u0421\u043e\u0443\u0441\u044b"})}),Object(p.jsx)("div",{className:Ge.a.item,ref:l,children:Object(p.jsx)(We,{ingredients:_("main"),typeName:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})})]})]})},Ke=function(){return Object(p.jsx)("div",{className:I.a.app,children:Object(p.jsx)("main",{className:I.a.container,children:Object(p.jsxs)(S.a,{backend:E.a,children:[Object(p.jsx)(Ye,{}),Object(p.jsx)(Le,{})]})})})},Ze=n(32),$e=n(2),et=n(7),tt=n.n(et),nt=function(){var e=u(),t=Object(d.h)().state,n=j((function(e){return e.userData})).isUserLoggedIn,c=Object(r.useState)({email:"",password:""}),a=Object(T.a)(c,2),i=a[0],s=a[1],o=function(e){s(Object($e.a)(Object($e.a)({},i),{},Object(Ze.a)({},e.target.name,e.target.value)))};return n?Object(p.jsx)(d.a,{to:(null===t||void 0===t?void 0:t.from)||"/"}):Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:tt.a.wrapper,children:[Object(p.jsx)("h2",{className:"".concat(tt.a.title," text text_type_main-medium"),children:"\u0412\u0445\u043e\u0434"}),Object(p.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n=i.email,r=i.password;e(function(e,t){return function(n){n({type:X}),fetch("".concat(fe,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){return 401===e.status&&alert("E-mail \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u0432\u0432\u0435\u0434\u0435\u043d\u044b \u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437."),e.ok?e.json():Promise.reject(e.status)})).then((function(e){n({type:K,user:e.user}),e.refreshToken&&e.accessToken&&(Ne("accessToken",e.accessToken.split("Bearer ")[1],null),localStorage.setItem("refreshToken",e.refreshToken))})).catch((function(e){console.log("Error login message: "+e),n({type:Y})}))}}(n,r))},className:tt.a.form,children:[Object(p.jsx)(b.Input,{type:"text",placeholder:"E-mail",onChange:o,value:i.email,name:"email",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"}),Object(p.jsx)("div",{className:"".concat(tt.a.container," mt-6"),children:Object(p.jsx)(b.PasswordInput,{onChange:o,value:i.password,name:"password",size:"default"})}),Object(p.jsx)("div",{className:"mt-6 mb-20",children:Object(p.jsx)(b.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0439\u0442\u0438"})})]}),Object(p.jsxs)("div",{className:"".concat(tt.a.additional," mb-20"),children:[Object(p.jsxs)("div",{className:tt.a.line,children:[Object(p.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0412\u044b\xa0\u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?\xa0"}),Object(p.jsx)(l.b,{className:"".concat(tt.a.link," text text_type_main-default"),to:"/register",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(p.jsxs)("div",{className:tt.a.line,children:[Object(p.jsx)("p",{className:"mt-4 text text_type_main-default text_color_inactive",children:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?\xa0"}),Object(p.jsx)(l.b,{className:"".concat(tt.a.link," text text_type_main-default"),to:"/forgot-password",children:" \u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})]})})},rt=function(){var e=Object(d.g)(),t=u(),n=Object(d.h)().state,c=j((function(e){return e.userData})).isUserLoggedIn,a=Object(r.useState)({name:"",email:"",password:""}),i=Object(T.a)(a,2),s=i[0],o=i[1],m=function(e){o(Object($e.a)(Object($e.a)({},s),{},Object(Ze.a)({},e.target.name,e.target.value)))};return c?Object(p.jsx)(d.a,{to:(null===n||void 0===n?void 0:n.from)||"/"}):Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:tt.a.wrapper,children:[Object(p.jsx)("h2",{className:"".concat(tt.a.title," text text_type_main-medium"),children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(p.jsxs)("form",{onSubmit:function(n){n.preventDefault();var r=s.email,c=s.password,a=s.name;r&&c&&a||alert("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0432\u043e\u0438 \u0434\u0430\u043d\u043d\u044b\u0435"),t(function(e,t,n){return function(r){r({type:X}),fetch("".concat(fe,"/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,name:n})}).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).then((function(e){return r({type:Q,user:e.user}),e})).catch((function(e){console.log("Error reister message: "+e),r({type:Y})}))}}(r,c,a)),e.replace({pathname:"/login"})},className:tt.a.form,children:[Object(p.jsx)(b.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:m,value:s.name,name:"name",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"}),Object(p.jsx)("div",{className:"".concat(tt.a.container," mt-6"),children:Object(p.jsx)(b.Input,{onChange:m,type:"text",placeholder:"E-mail",value:s.email,name:"email",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(p.jsx)("div",{className:"".concat(tt.a.container," mt-6"),children:Object(p.jsx)(b.PasswordInput,{onChange:m,value:s.password,name:"password",size:"default"})}),Object(p.jsx)("div",{className:"mt-6 mb-20",children:Object(p.jsx)(b.Button,{type:"primary",size:"medium",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})]}),Object(p.jsxs)("div",{className:"".concat(tt.a.line,"  mb-20"),children:[Object(p.jsx)("p",{className:"mt-4 text text_type_main-default text_color_inactive",children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?\xa0"}),Object(p.jsx)(l.b,{className:"".concat(tt.a.link," text text_type_main-default"),to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})},ct=function(){var e=u(),t=Object(d.g)(),n=Object(d.h)().state,c=j((function(e){return e.userData})),a=c.isUserLoggedIn,i=c.getUserEmail,s=Object(r.useState)(""),o=Object(T.a)(s,2),m=o[0],_=o[1];return Object(r.useEffect)((function(){i&&t.replace("/reset-password")}),[i,t]),a?Object(p.jsx)(d.a,{to:(null===n||void 0===n?void 0:n.from)||"/"}):Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:tt.a.wrapper,children:[Object(p.jsx)("h2",{className:"".concat(tt.a.title," text text_type_main-medium"),children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(p.jsxs)("form",{className:tt.a.form,onSubmit:function(t){t.preventDefault(),e(function(e){return function(t){t({type:X}),fetch("".concat(fe,"/password-reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).then((function(e){return t({type:Z}),e.user})).catch((function(e){console.log("Error forgot password message: "+e),t({type:Y})}))}}(m))},children:[Object(p.jsx)("div",{className:"".concat(tt.a.container," mt-6"),children:Object(p.jsx)(b.Input,{type:"text",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",onChange:function(e){return _(e.target.value)},value:m,name:"email",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(p.jsx)("div",{className:"mt-6 mb-20",children:Object(p.jsx)(b.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})})]}),Object(p.jsxs)("div",{className:tt.a.line,children:[Object(p.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?\xa0"}),Object(p.jsx)(l.b,{className:"".concat(tt.a.link," text text_type_main-default"),to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})},at=n(25),it=n.n(at),st=n(55),ot=n.n(st),lt=n(27),dt=n.n(lt),ut=function(e){var t=e.orderNumber,n=e.name,r=e.ingredientsId,c=e.createdAt,a=e.status,i=Object(d.h)(),s=j((function(e){return e.ingredients})).ingredients,o=[],l=0;r.forEach((function(e){var t=s.find((function(t){return t._id===e}));l+=t.price,t&&!o.includes(t)&&o.push(t)}));var u=function(e){var t=e.ingredient,n=e.index,r=e.length;return Object(p.jsxs)("li",{className:5!==n?dt.a.wrapper:dt.a.last,style:{zIndex:20-n},children:[Object(p.jsx)("img",{className:dt.a.icon,src:null===t||void 0===t?void 0:t.image_mobile,alt:""}),5===n&&r>6?Object(p.jsxs)("span",{className:"".concat(dt.a.lastAmount," text text_type_main-default"),children:["+",r-6]}):null]})},m="done"===a?"#00CCCC":"#F2F2F3";return Object(p.jsx)("section",{className:dt.a.section,children:Object(p.jsxs)("div",{className:dt.a.container,children:[Object(p.jsxs)("div",{className:dt.a.line,children:[Object(p.jsxs)("span",{className:"text text_type_digits-default",children:["#",t]}),Object(p.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:Ie(c)})]}),Object(p.jsx)("p",{className:"text text_type_main-medium mb-6 mt-6",children:n}),"/profile/orders"===i.pathname?Object(p.jsx)("p",{className:"text text_type_main-default pb-6",style:{color:m},children:Ce(a)}):"",Object(p.jsxs)("div",{className:dt.a.line,children:[Object(p.jsx)("ul",{className:dt.a.icons,children:o.map((function(e,t){return t<6&&Object(p.jsx)(u,{ingredient:e,index:t,length:o.length},e._id)}))}),Object(p.jsxs)("div",{className:dt.a.price,children:[Object(p.jsx)("p",{className:"text text_type_digits-default mr-2",children:l}),Object(p.jsx)(b.CurrencyIcon,{type:"primary"})]})]})]})})},jt=function(){return{type:ie}},mt=ye("accessToken"),_t=function(){var e=Object(d.h)(),t=j((function(e){return e.wsStore})).feedOrders,n=u();return Object(r.useEffect)((function(){return n(we()),n({type:oe}),console.log("tok "+mt),function(){n(jt())}}),[n]),Object(p.jsx)("div",{className:ot.a.container,children:Object(p.jsx)("ul",{className:ot.a.list,children:null===t||void 0===t?void 0:t.map((function(t){return Object(p.jsx)(l.b,{className:ot.a.link,to:{pathname:"/profile/orders/".concat(t.number),state:{background:e}},children:Object(p.jsx)("li",{className:ot.a.orderItem,children:Object(p.jsx)(ut,{orderNumber:t.number,name:t.name,ingredientsId:t.ingredients,status:t.status,createdAt:t.createdAt})})},t._id)}))})})},bt=n(28),pt=n.n(bt),xt=function(){var e,t=u(),n=Object(d.i)().id,c=j((function(e){return e.ingredients})),a=c.ingredients,i=c.ingredientsRequest,s=(c.ingredientsError,j((function(e){return e.order})).orderCardDetails);Object(r.useEffect)((function(){t(ke(n))}),[t]);var o=[],l=0;null===(e=s.ingredients)||void 0===e||e.forEach((function(e){var t=a.find((function(t){return t._id===e}));l+=t.price,t&&!o.includes(t)&&o.push(t)}));var m=function(e){return s.ingredients.filter((function(t){return t===e})).length},_="done"===(null===s||void 0===s?void 0:s.status)?"#00CCCC":"#F2F2F3";return s&&0!==a.length&&!i&&Object(p.jsxs)("section",{className:pt.a.section,children:[Object(p.jsx)("div",{className:pt.a.header,children:Object(p.jsxs)("span",{className:"text text_type_digits-default mb-10",children:["#",s.number]})}),Object(p.jsx)("h2",{className:"text text_type_main-medium",children:s.name}),Object(p.jsx)("span",{className:"".concat(pt.a.status," text text_type_main-default"),style:{color:_},children:Ce(s.status)}),Object(p.jsx)("p",{className:"text text_type_main-medium",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(p.jsx)("ul",{className:pt.a.ingredientsList,children:o.map((function(e){return Object(p.jsxs)("li",{className:pt.a.item,children:[Object(p.jsxs)("div",{className:pt.a.right,children:[Object(p.jsx)("img",{className:pt.a.icon,src:e.image_mobile,alt:e.name}),Object(p.jsx)("p",{className:"text text_type_main-default",children:e.name})]}),Object(p.jsxs)("div",{className:pt.a.left,children:[Object(p.jsxs)("span",{className:"text_type_digits-default mr-2",children:[m(e._id)," x ",e.price]}),Object(p.jsx)(b.CurrencyIcon,{type:"primary"})]})]},e._id)}))}),Object(p.jsxs)("div",{className:pt.a.line,children:[Object(p.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:function(){return s.createdAt?Ie(s.createdAt):null}}),Object(p.jsxs)("div",{className:pt.a.left,children:[Object(p.jsx)("span",{className:"text_type_digits-default mr-2",children:l}),Object(p.jsx)(b.CurrencyIcon,{type:"primary"})]})]})]})},Ot=function(){var e=Object(d.h)(),t=j((function(e){return e.userData})).user,n=u(),c=Object(r.useState)(t.name),a=Object(T.a)(c,2),i=a[0],s=a[1],o=Object(r.useState)(t.email),m=Object(T.a)(o,2),_=m[0],x=m[1],O=Object(r.useState)(""),h=Object(T.a)(O,2),f=h[0],g=h[1],v=Object(r.useState)(!0),y=Object(T.a)(v,2),N=y[0],E=y[1],S=Object(r.useState)(!1),C=Object(T.a)(S,2),I=C[0],R=C[1],k=function(){E(!1)};return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("main",{className:it.a.container,children:Object(p.jsxs)("div",{className:it.a.wrapper,style:{width:"/profile/orders"===e.pathname?"100%":"65%"},children:[Object(p.jsxs)("div",{className:it.a.left,children:[Object(p.jsx)(l.c,{to:"/profile",exact:!0,activeStyle:{color:"#F2F2F3"},className:"".concat(it.a.link," text text_type_main-medium pb-4 pt-4 text_color_inactive"),children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(p.jsx)(l.c,{to:"/profile/orders",exact:!0,activeStyle:{color:"#F2F2F3"},className:"".concat(it.a.link," text text_type_main-medium pb-4 pt-4 text_color_inactive"),children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(p.jsx)(l.c,{to:"/login",onClick:function(){n(Ue())},className:"".concat(it.a.link," text text_type_main-medium pb-4 pt-4 text_color_inactive"),children:"\u0412\u044b\u0445\u043e\u0434"}),Object(p.jsx)("div",{className:it.a.text,children:Object(p.jsx)("p",{className:"mt-20 text text_type_main-default text_color_inactive",children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})})]}),Object(p.jsxs)(d.d,{children:[Object(p.jsx)(d.b,{path:"/profile",exact:!0,children:Object(p.jsx)("div",{className:it.a.right,children:Object(p.jsxs)("form",{onSubmit:function(e){var t,r,c;e.preventDefault(),n((t=_,r=f,c=i,function(e){e({type:X}),fetch("".concat(fe,"/auth/user"),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer "+ye("accessToken")},body:JSON.stringify({email:t,password:r,name:c})}).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).then((function(t){e({type:ne,user:t.user})})).catch((function(t){e({type:Y}),console.log("Error user update info message: "+t)}))})),R(!1),E(!0)},className:it.a.form,children:[Object(p.jsx)(b.Input,{disabled:!!N,icon:"EditIcon",type:"text",placeholder:"\u0418\u043c\u044f",onChange:function(e){s(e.target.value),R(!0)},value:i,name:"name",error:!1,onIconClick:k,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"}),Object(p.jsx)("div",{className:"mt-6",children:Object(p.jsx)(b.Input,{disabled:!!N,type:"text",icon:"EditIcon",placeholder:"\u041b\u043e\u0433\u0438\u043d",onChange:function(e){x(e.target.value),R(!0)},value:_,name:"email",error:!1,onIconClick:k,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(p.jsx)("div",{className:"mt-6",children:Object(p.jsx)(b.Input,{disabled:!!N,onChange:function(e){g(e.target.value),R(!0)},type:"text",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",icon:"EditIcon",value:f,name:"password",error:!1,onIconClick:k,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),I&&Object(p.jsxs)("div",{className:it.a.buttons,children:[Object(p.jsx)("span",{onClick:function(){s(t.name),x(t.email),g(""),R(!1),E(!0)},className:"".concat(it.a.reject," text text_type_main-default mr-6"),children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(p.jsx)(b.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})})}),Object(p.jsx)(d.b,{path:"/profile/orders",exact:!0,children:Object(p.jsx)(_t,{})}),Object(p.jsx)(d.b,{path:"/profile/orders/:id",children:Object(p.jsx)(xt,{})})]})]})})})},ht=function(){var e=u(),t=Object(d.g)(),n=j((function(e){return e.userData})),c=n.isUserLoggedIn,a=n.getUserEmail,i=n.isResetPassword,s=Object(r.useState)({password:"",token:""}),o=Object(T.a)(s,2),m=o[0],_=o[1],x=function(e){_(Object($e.a)(Object($e.a)({},m),{},Object(Ze.a)({},e.target.name,e.target.value)))};return Object(r.useEffect)((function(){i&&t.replace("/login")}),[i,t]),!c&&a||t.replace("/"),Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:tt.a.wrapper,children:[Object(p.jsx)("h2",{className:"".concat(tt.a.title," text text_type_main-medium"),children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(p.jsxs)("form",{onSubmit:function(t){var n,r;t.preventDefault(),e((n=m.password,r=m.token,function(e){e({type:X}),fetch("".concat(fe,"/password-reset/reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:n,token:r})}).then((function(e){return e.ok?e.json():Promise.reject(e)})).then((function(t){return e({type:$,user:t.user})})).catch((function(t){console.log("Error user reset password message: "+t),e({type:Y})}))}))},className:tt.a.form,children:[Object(p.jsxs)("div",{className:"".concat(tt.a.container," mt-6"),children:[Object(p.jsx)(b.PasswordInput,{onChange:x,value:m.password,name:"password",size:"default"}),Object(p.jsx)("div",{className:"".concat(tt.a.container," mt-6"),children:Object(p.jsx)(b.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",onChange:x,value:m.token,name:"token",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})})]}),Object(p.jsx)("div",{className:"mt-6 mb-20",children:Object(p.jsx)(b.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})})]}),Object(p.jsxs)("div",{className:tt.a.line,children:[Object(p.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?\xa0"}),Object(p.jsx)(l.b,{className:"".concat(tt.a.link," text text_type_main-default"),to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})},ft=n(90),gt=n.n(ft),vt=n(114),yt=n(63),Nt=["children"],Et=function(e){var t=e.children,n=Object(yt.a)(e,Nt),c=u(),a=j((function(e){return e.userData})).isUserLoggedIn,i=function(){var e=Object(vt.a)(gt.a.mark((function e(){return gt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(we());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){i()}),[]),Object(p.jsx)(d.b,Object($e.a)(Object($e.a)({},n),{},{render:function(e){var n=e.location;return a?t:Object(p.jsx)(d.a,{to:{pathname:"/login",state:{from:n}}})}}))},St=n(35),Ct=n.n(St),It=n(19),Tt=n.n(It),Rt=function(){var e=j((function(e){return e.wsStore})),t=e.feedOrders,n=e.total,r=e.totalToday,c=null===t||void 0===t?void 0:t.filter((function(e){return"done"===e.status})),a=null===t||void 0===t?void 0:t.filter((function(e){return"pending"===e.status}));return Object(p.jsxs)("section",{className:Tt.a.container,children:[Object(p.jsxs)("div",{className:Tt.a.statusColumns,children:[Object(p.jsxs)("div",{className:Tt.a.column,children:[Object(p.jsx)("p",{className:"text text_type_main-medium",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(p.jsxs)("ul",{className:Tt.a.numbers,style:{color:"#00CCCC"},children:[Object(p.jsx)("div",{className:Tt.a.numbersColumn,children:c&&c.slice(0,5).map((function(e){return Object(p.jsx)("li",{className:"text text_type_digits-default",children:e.number},e._id)}))}),Object(p.jsx)("div",{className:Tt.a.numbersColumn,children:c.length>5&&(null===c||void 0===c?void 0:c.slice(5,10).map((function(e){return Object(p.jsx)("li",{className:"text text_type_digits-default",children:e.number},e._id)})))})]})]}),Object(p.jsxs)("div",{className:Tt.a.column,children:[Object(p.jsx)("p",{className:"text text_type_main-medium",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(p.jsxs)("ul",{className:Tt.a.numbers,children:[null===a||void 0===a?void 0:a.slice(0,5).map((function(e){return Object(p.jsx)("li",{className:"text text_type_digits-default",children:e.number},e._id)})),a.length>5&&(null===a||void 0===a?void 0:a.slice(5,10).map((function(e){return Object(p.jsx)("li",{className:"text text_type_digits-default",children:e.number},e._id)})))]})]})]}),Object(p.jsxs)("div",{className:Tt.a.block,children:[Object(p.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(p.jsx)("p",{className:"".concat(Tt.a.total," text text_type_digits-large"),children:n})]}),Object(p.jsxs)("div",{className:Tt.a.block,children:[Object(p.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(p.jsx)("p",{className:"".concat(Tt.a.total," text text_type_digits-large"),children:r})]})]})},kt=function(){var e=Object(d.h)(),t=j((function(e){return e.wsStore})).feedOrders,n=u();return Object(r.useEffect)((function(){return n({type:se}),function(){n(jt())}}),[n]),Object(p.jsxs)("div",{className:Ct.a.container,children:[Object(p.jsx)("h2",{className:"text text_type_main-large mb-5",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(p.jsxs)("div",{className:Ct.a.wrapper,children:[Object(p.jsx)("div",{className:Ct.a.section,children:Object(p.jsx)("ul",{className:Ct.a.list,children:null===t||void 0===t?void 0:t.map((function(t){return Object(p.jsx)(l.b,{className:Ct.a.link,to:{pathname:"/feed/".concat(t.number),state:{background:e}},children:Object(p.jsx)("li",{className:Ct.a.orderItem,children:Object(p.jsx)(ut,{orderNumber:t.number,name:t.name,ingredientsId:t.ingredients,createdAt:t.createdAt,status:t.status})})},t._id)}))})}),Object(p.jsx)("div",{className:Ct.a.section,children:Object(p.jsx)(Rt,{})})]})]})},wt=n(91),Dt=n.n(wt),Ut=function(){return Object(p.jsx)("div",{className:Dt.a.container,children:Object(p.jsxs)("p",{className:"text text_type_main-medium",children:["\u0422\u0430\u043a\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442. \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430\xa0",Object(p.jsx)(l.b,{className:Dt.a.link,to:"/",children:"\u0433\u043b\u0430\u0432\u043d\u0443\u044e"}),"."]})})},Ft=n(36),Lt=n.n(Ft),qt=function(){var e=j((function(e){return e.ingredients})).ingredientDetails,t=function(){return Object(p.jsxs)("div",{className:Lt.a.values,children:[Object(p.jsxs)("div",{className:Lt.a.valueItem,children:[Object(p.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b"}),Object(p.jsx)("span",{className:"text text_type_digits-default text_color_inactive",children:e.calories})]}),Object(p.jsxs)("div",{className:Lt.a.valueItem,children:[Object(p.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(p.jsx)("span",{className:"text text_type_digits-default text_color_inactive",children:e.proteins})]}),Object(p.jsxs)("div",{className:Lt.a.valueItem,children:[Object(p.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(p.jsx)("span",{className:"text text_type_digits-default text_color_inactive",children:e.fat})]}),Object(p.jsxs)("div",{className:Lt.a.valueItem,children:[Object(p.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(p.jsx)("span",{className:"text text_type_digits-default text_color_inactive",children:e.carbohydrates})]})]})};return Object(p.jsxs)("div",{className:Lt.a.container,children:[Object(p.jsx)("img",{className:"".concat(Lt.a.image," mb-4"),src:e.image,alt:e.name}),Object(p.jsx)("h3",{className:"text text_type_main-medium mb-4",children:e.name}),Object(p.jsx)(t,{})]})},Gt=function(){var e=u(),t=Object(d.i)().id,n=j((function(e){return e.ingredients})),c=n.ingredients,a=n.ingredientDetails,i=c.find((function(e){return e._id===t}));return Object(r.useEffect)((function(){e(He(i))}),[e,i]),Object(p.jsx)(p.Fragment,{children:a?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h2",{className:"text text_type_main-large mt-20",children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0418\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(p.jsx)(qt,{})]}):Object(p.jsx)("p",{className:"text text_type_main-medium text_color_inactive",children:"\u0423 \u043d\u0430\u0441 \u0441\u0435\u0439\u0447\u0430\u0441 \u043d\u0435\u0442 \u0442\u0430\u043a\u043e\u0433\u043e \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430."})})},Pt=n(29),Bt=n.n(Pt),At=function(){var e=Object(d.i)().id,t=j((function(e){return e.wsStore.feedOrders})),n=j((function(e){return e.ingredients})),r=n.ingredients,c=n.ingredientsRequest,a=n.ingredientsError,i=t.find((function(t){return t.number===Number(e)})),s=[],o=0;null===i||void 0===i||i.ingredients.forEach((function(e){var t=r.find((function(t){return t._id===e}));o+=t.price,t&&!s.includes(t)&&s.push(t)}));var l=function(e){return null===i||void 0===i?void 0:i.ingredients.filter((function(t){return t===e})).length},u="done"===(null===i||void 0===i?void 0:i.status)?"#00CCCC":"#F2F2F3";return r.length>0&&!c&&!a&&i?Object(p.jsxs)("section",{className:Bt.a.section,children:[Object(p.jsx)("div",{className:Bt.a.header,children:Object(p.jsxs)("span",{className:"text text_type_digits-default mb-10",children:["#",i.number]})}),Object(p.jsx)("h2",{className:"text text_type_main-medium",children:i.name}),Object(p.jsx)("span",{className:"".concat(Bt.a.status," text text_type_main-default"),style:{color:u},children:Ce(i.status)}),Object(p.jsx)("p",{className:"text text_type_main-medium",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(p.jsx)("ul",{className:Bt.a.ingredientsList,children:s.map((function(e){return Object(p.jsxs)("li",{className:Bt.a.item,children:[Object(p.jsxs)("div",{className:Bt.a.right,children:[Object(p.jsx)("img",{className:Bt.a.icon,src:e.image_mobile,alt:e.name}),Object(p.jsx)("p",{className:"text text_type_main-default",children:e.name})]}),Object(p.jsxs)("div",{className:Bt.a.left,children:[Object(p.jsxs)("span",{className:"text_type_digits-default mr-2",children:[l(e._id)," x ",e.price]}),Object(p.jsx)(b.CurrencyIcon,{type:"primary"})]})]},e._id)}))}),Object(p.jsxs)("div",{className:Bt.a.line,children:[Object(p.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:Ie(i.createdAt)}),Object(p.jsxs)("div",{className:Bt.a.left,children:[Object(p.jsx)("span",{className:"text_type_digits-default mr-2",children:o}),Object(p.jsx)(b.CurrencyIcon,{type:"primary"})]})]})]}):null},zt=function(){var e=u(),t=Object(d.g)(),n=Object(d.h)(),c=j((function(e){return e.userData})).isUserLoggedIn,a=j((function(e){return e.ingredients})).ingredients,i="PUSH"===t.action&&n.state&&n.state.background;Object(r.useEffect)((function(){c||e(we())}),[c,e]),Object(r.useEffect)((function(){0===a.length&&e(Me())}),[e,a.length]);var s=function(){t.goBack()};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(x,{}),Object(p.jsxs)(d.d,{location:i||n,children:[Object(p.jsx)(d.b,{path:"/",exact:!0,children:Object(p.jsx)(Ke,{})}),Object(p.jsx)(d.b,{path:"/login",children:Object(p.jsx)(nt,{})}),Object(p.jsx)(d.b,{path:"/register",exact:!0,children:Object(p.jsx)(rt,{})}),Object(p.jsx)(d.b,{path:"/forgot-password",exact:!0,children:Object(p.jsx)(ct,{})}),Object(p.jsx)(d.b,{path:"/reset-password",exact:!0,children:Object(p.jsx)(ht,{})}),Object(p.jsx)(Et,{path:"/profile",children:Object(p.jsx)(Ot,{})}),Object(p.jsx)(d.b,{path:"/feed/:id",children:Object(p.jsx)(xt,{})}),Object(p.jsx)(d.b,{path:"/feed",children:Object(p.jsx)(kt,{})}),Object(p.jsx)(d.b,{path:"/ingredients/:id",children:Object(p.jsx)(Gt,{})}),Object(p.jsx)(d.b,{children:Object(p.jsx)(Ut,{})})]}),i&&Object(p.jsxs)(d.d,{children:[Object(p.jsx)(d.b,{path:"/ingredients/:id",children:Object(p.jsx)(N,{header:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",closeHandler:s,children:Object(p.jsx)(qt,{})})}),Object(p.jsx)(d.b,{path:"/feed/:id",children:Object(p.jsx)(N,{closeHandler:s,children:Object(p.jsx)(At,{})})}),Object(p.jsx)(d.b,{path:"/profile/orders/:id",children:Object(p.jsx)(N,{closeHandler:s,children:Object(p.jsx)(At,{})})})]})]})},Mt=n(33),Ht=n(115),Jt=n(65),Wt={constructorIngredients:[],topBun:null,bottomBun:null},Vt={ingredients:[],ingredientsRequest:!1,ingredientsError:!1,ingredientDetails:null},Xt={orderRequest:!1,orderId:null,orderRequestError:!1,isShownOrderDetails:!1,orderCardDetails:[]},Qt={user:null,userDataRequest:!1,userDataError:!1,isUserLoggedIn:!1,getUserEmail:!1,isResetPassword:!1},Yt={wsConnected:!1,feedOrders:[],total:null,totalToday:null},Kt=Object(Mt.b)({ingredients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G:return Object($e.a)(Object($e.a)({},e),{},{ingredientsRequest:!0});case P:return Object($e.a)(Object($e.a)({},e),{},{ingredientsError:!1,ingredients:t.ingredients,ingredientsRequest:!1});case B:return Object($e.a)(Object($e.a)({},e),{},{ingredientsError:!0,ingredientsRequest:!1});case A:return Object($e.a)(Object($e.a)({},e),{},{ingredientsRequest:!1,ingredientsError:!1,ingredientDetails:t.ingredient});default:return e}},constructorStore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:var n=t.ingredientType,r=t.name,c=t.image,a=t.price,i=t._id;return"bun"===n?Object($e.a)(Object($e.a)({},e),{},{topBun:{ingredientType:n,name:r,image:c,price:a,_id:i,uniqueId:Object(Jt.a)()},bottomBun:{ingredientType:n,name:r,image:c,price:a,_id:i,uniqueId:Object(Jt.a)()}}):Object($e.a)(Object($e.a)({},e),{},{constructorIngredients:[].concat(Object(me.a)(e.constructorIngredients),[{ingredientType:n,name:r,image:c,price:a,_id:i,uniqueId:Object(Jt.a)()}])});case F:return Object($e.a)(Object($e.a)({},e),{},{constructorIngredients:Object(me.a)(e.constructorIngredients).filter((function(e){return e.uniqueId!==t.uniqueId}))});case L:var s=e.constructorIngredients.splice(t.dragIndex,1),o=[].concat(Object(me.a)(e.constructorIngredients.slice(0,t.hoverIndex)),[s[0]],Object(me.a)(e.constructorIngredients.slice(t.hoverIndex,e.constructorIngredients.length)));return Object($e.a)(Object($e.a)({},e),{},{constructorIngredients:o});case q:return Object($e.a)(Object($e.a)({},e),{},{constructorIngredients:[],topBun:null,bottomBun:null});default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return Object($e.a)(Object($e.a)({},e),{},{orderRequest:!0,orderId:null});case M:return Object($e.a)(Object($e.a)({},e),{},{orderRequest:!1,orderRequestError:!1,orderId:t.orderId});case H:return Object($e.a)(Object($e.a)({},e),{},{orderRequestError:!0,orderRequest:!1});case J:return Object($e.a)(Object($e.a)({},e),{},{orderRequest:!0});case W:return Object($e.a)(Object($e.a)({},e),{},{orderRequest:!1,orderCardDetails:t.orderCardDetails});case V:return Object($e.a)(Object($e.a)({},e),{},{orderRequest:!1,orderCardDetails:[],orderRequestError:!0});default:return e}},userData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case X:return Object($e.a)(Object($e.a)({},e),{},{userDataRequest:!0});case K:return Object($e.a)(Object($e.a)({},e),{},{userDataRequest:!1,userDataError:!1,user:t.user,isUserLoggedIn:!0});case Q:return Object($e.a)(Object($e.a)({},e),{},{userDataRequest:!1,userDataError:!1,user:t.user});case re:return{user:null,userDataRequest:!1,userDataError:!1,isUserLoggedIn:!1,getUserEmail:!1,isResetPassword:!1};case Z:return Object($e.a)(Object($e.a)({},e),{},{userDataRequest:!1,getUserEmail:!0});case $:return Object($e.a)(Object($e.a)({},e),{},{userDataRequest:!1,isResetPassword:!0});case Y:return Object($e.a)({},e);case ee:return Object($e.a)(Object($e.a)({},e),{},{userDataRequest:!1,user:t.user,isUserLoggedIn:!0});case te:return Object($e.a)(Object($e.a)({},e),{},{userDataError:!1,isUserLoggedIn:!0});case ne:return Object($e.a)(Object($e.a)({},e),{},{user:t.user});default:return e}},wsStore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ce:return Object($e.a)(Object($e.a)({},e),{},{wsConnected:!0});case ae:return Yt;case ie:return Object($e.a)(Object($e.a)({},e),{},{wsConnected:!1});case le:return Object($e.a)(Object($e.a)({},e),{},{feedOrders:t.payload.orders,total:t.payload.total,totalToday:t.payload.totalToday});default:return e}}}),Zt=["success"],$t=(Ee="wss://norma.nomoreparties.space/orders",Se={wsStart:se,wsStartProfile:oe,wsSendMessage:"WS_SEND_MESSAGE",onOpen:ce,onClose:ie,onError:ae,getFeedOrders:le},function(e){var t=null;return function(n){return function(r){var c=e.dispatch,a=r.type,i=r.payload,s=Se.wsStart,o=Se.wsStartProfile,l=Se.wsSendMessage,d=Se.onOpen,u=Se.onClose,j=Se.onError,m=Se.getFeedOrders,_=ye("accessToken");if(a===s&&(t=new WebSocket("".concat(Ee,"/all"))),a===o&&(t=new WebSocket("".concat(Ee,"?token=").concat(_))),t&&(t.onopen=function(e){c({type:d,payload:e})},t.onerror=function(e){c({type:j,payload:e})},t.onmessage=function(e){var t=e.data,n=JSON.parse(t),r=(n.success,Object(yt.a)(n,Zt));c({type:m,payload:r})},t.onclose=function(e){c({type:u,payload:e})},a===l&&_)){var b={payload:i,token:_};t.send(JSON.stringify(b))}n(r)}}}),en=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Mt.c)(Object(Mt.a)(Ht.a,$t)),tn=Object(Mt.d)(Kt,en);i.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(o.a,{store:tn,children:Object(p.jsx)(l.a,{basename:"react-burger",children:Object(p.jsx)(zt,{})})})}),document.getElementById("root")),s()},25:function(e,t,n){e.exports={container:"profile_container__15mtc",wrapper:"profile_wrapper__rU96U",left:"profile_left__Fj7y1",right:"profile_right__1nBRC",link:"profile_link__inIC8",footer:"profile_footer__3Niae",text:"profile_text__3BiyX",buttons:"profile_buttons__3Ax8D",reject:"profile_reject__7dr0o"}},26:function(e,t,n){e.exports={header:"app-header_header__3Pljy",nav:"app-header_nav__3Ylne",text:"app-header_text__3Nv8w",secondarytext:"app-header_secondarytext__2iaVg app-header_text__3Nv8w",container:"app-header_container__MDmA9",logocontainer:"app-header_logocontainer__3ueM1",link:"app-header_link__23Xzg"}},27:function(e,t,n){e.exports={container:"order_container__M9Qi7",div:"order_div__1FcfC",line:"order_line__JyQgk",link:"order_link__7TL3b",icons:"order_icons__3tbJi",icon:"order_icon__11cYg",wrapper:"order_wrapper__IlwRr",price:"order_price__Fu8Jl",last:"order_last__1DPgh",lastAmount:"order_lastAmount__2Ak3i",svg:"order_svg__1jopr"}},28:function(e,t,n){e.exports={section:"order-page_section__FeTGn",header:"order-page_header__31hT-",ingredientsList:"order-page_ingredientsList__wNH7n",item:"order-page_item__3mX-3",link:"order-page_link__1zE8W",status:"order-page_status__2149Z",right:"order-page_right__2Pmcj",left:"order-page_left__3nGBt",icon:"order-page_icon__3V1bt",line:"order-page_line__1vdyX"}},29:function(e,t,n){e.exports={section:"order-info_section__yHJwT",header:"order-info_header__2bCGV",ingredientsList:"order-info_ingredientsList__3smJj",item:"order-info_item__3auNG",link:"order-info_link__3d1qF",status:"order-info_status__1Dl0p",right:"order-info_right__ycS7u",left:"order-info_left__1sFCt",icon:"order-info_icon__3ILVM",line:"order-info_line__1vaLY"}},35:function(e,t,n){e.exports={container:"feed_container__74evi",wrapper:"feed_wrapper__8F5cO",section:"feed_section__iUMeE",list:"feed_list__RP0d3",orderItem:"feed_orderItem__2qrbq",link:"feed_link__P-Lda"}},36:function(e,t,n){e.exports={container:"ingredient-details_container__2R7kq",values:"ingredient-details_values__1OGIw",image:"ingredient-details_image__1L4dO",valueItem:"ingredient-details_valueItem__15-04"}},42:function(e,t,n){e.exports={container:"burger-constructor_container__aSlIY",orders:"burger-constructor_orders__1wWih",mainIngredientsList:"burger-constructor_mainIngredientsList__7NYUy burger-constructor_orders__1wWih"}},43:function(e,t,n){e.exports={section:"burger-ingredients_section__1chj-",ingredientList:"burger-ingredients_ingredientList__MFA6X",item:"burger-ingredients_item__2UvlD"}},44:function(e,t,n){e.exports={ingredientCard:"ingredient_ingredientCard__3IFP3",name:"ingredient_name__2Gi7o",price:"ingredient_price__1WX1f",image:"ingredient_image__3OPQT",link:"ingredient_link__1DrVx"}},53:function(e,t,n){e.exports={modal:"modal_modal__94xGV",modalHeader:"modal_modalHeader__8uKam",modalHeaderRight:"modal_modalHeaderRight__1lq3m modal_modalHeader__8uKam",closeButton:"modal_closeButton__V4b5W"}},54:function(e,t,n){e.exports={tabs:"tabs_tabs__1pLFo",item:"tabs_item__3Wmix"}},55:function(e,t,n){e.exports={container:"orders-history_container__1VgD-",list:"orders-history_list__3jXU_",link:"orders-history_link__2k5JU",orderItem:"orders-history_orderItem__hc1LG"}},64:function(e,t,n){e.exports={container:"ingredients-type_container__1lEx-",list:"ingredients-type_list__10J6K",ingredientItem:"ingredients-type_ingredientItem__3Bvhj"}},7:function(e,t,n){e.exports={wrapper:"registration_wrapper__d9Tyv",title:"registration_title__2l9Am",container:"registration_container__2536Y",form:"registration_form__1u95j",additional:"registration_additional__2CMBf",line:"registration_line__1Hv_k",link:"registration_link__1NFjN"}},86:function(e,t,n){e.exports={app:"app_app__T_GMA",container:"app_container__af3ku"}},88:function(e,t,n){e.exports={container:"constructor-footer_container__2DYLf",price:"constructor-footer_price__1TqZi"}},91:function(e,t,n){e.exports={container:"not-found-page_container__1FXsG",link:"not-found-page_link__2GYQl"}}},[[200,1,2]]]);
//# sourceMappingURL=main.7b77701c.chunk.js.map